# 13-03.md

# **Домашнее задание к занятию "Защита сети"**-***Вуколов Евгений***

Подготовка к выполнению заданий

    Подготовка защищаемой системы:

    установите Suricata,
    установите Fail2Ban.

    Подготовка системы злоумышленника: установите nmap и thc-hydra либо скачайте и установите Kali linux.

Обе системы должны находится в одной подсети.
## **Задание 1**

Проведите разведку системы и определите, какие сетевые службы запущены на защищаемой системе:

sudo nmap -sA < ip-адрес >

sudo nmap -sT < ip-адрес >

sudo nmap -sS < ip-адрес >

sudo nmap -sV < ip-адрес >

В качестве ответа пришлите события, которые попали в логи Suricata и Fail2Ban, прокомментируйте результат

## **Решение 1**

- ![scrinshot](https://github.com/Evgenii-379/13-03.md/blob/main/Снимок%20экрана%202024-06-28%20002644.png)
- ![scrinshot](https://github.com/Evgenii-379/13-03.md/blob/main/Снимок%20экрана%202024-06-28%20002738.png)


nmap в 4 режимах сканирования показывает что порты 22 открыт, 80, 443 закрыты

Логи в Suricata:
- ![scrinshot](https://github.com/Evgenii-379/13-03.md/blob/main/Снимок%20экрана%202024-06-28%20002459.png)


При сканировании в режиме -sA (агресивное сканирование)- определенно возможное имя атакуещего хоста Kali Linux в пакете запроса DHCP. Классификация:
потенциальное нарушение корпоративной конфиденциальности.Приоретет 1

Сканирование в режиме  -sT (TCP конект-сканирование)- определенны подозрительные входящие соединения на порт MySQL, SQL, PostgresSQL, MSSQL . Потенциальное сканирование VNC. Классификация: потенциально
 плохой трафик.

Сканирование в режиме -sS (TCP SYN-сканирование)- определенны подозрительные входящие соединения на порт MySQL, SQL, PostgresSQL . Классификация: потенциально плохой трафик.
Потенциальное сканирование VNC. Классификация: попытка утечки информации.Приоретет 2 Также подозрительно входящие сообщения на порт MSSQL. Классификация: потенциально плохой трафик.

Сканирование в режиме -sV (определение версии)- определенно тоже самое что и при сканировании в режиме -sS, потенциально плохой трафик, попытка утечки информации.

В итоге при сканировании, логи в журнале suricata показали потенциально плохой трафик. 

Логи в file2ban:
- ![scrinshot](https://github.com/Evgenii-379/13-03.md/blob/main/Снимок%20экрана%202024-06-28%20002531.png)

В логах журналах file2ban особо подозрительных действий не обнаруженно


## **Задание 2**

Проведите атаку на подбор пароля для службы SSH:

hydra -L users.txt -P pass.txt < ip-адрес > ssh

    Настройка hydra:

    создайте два файла: users.txt и pass.txt;
    в каждой строчке первого файла должны быть имена пользователей, второго — пароли. В нашем случае это могут быть случайные строки, но ради эксперимента можете добавить имя и пароль существующего пользователя.


    Включение защиты SSH для Fail2Ban:

    открыть файл /etc/fail2ban/jail.conf,
    найти секцию ssh,
    установить enabled в true.

В качестве ответа пришлите события, которые попали в логи Suricata и Fail2Ban, прокомментируйте результат

## **Решение 2**

При сканировании утилитой hydra сервера по IP адресу, suricata обнаружила потенциальное исходящее сканирование SSH. Классификация: попытка утечки информации. Приоретет 2.

В логах журнала  file2ban информация о том что найден IP адрес, в итоге этот IP отправлен в БАН
 
- ![scrinshot](https://github.com/Evgenii-379/13-03.md/blob/main/Снимок%20экрана%202024-06-28%20004545.png)
- ![scrinshot](https://github.com/Evgenii-379/13-03.md/blob/main/Снимок%20экрана%202024-06-28%20010702.png)

